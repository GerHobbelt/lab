import importer from "../../../src/lab/import-export/netlogo-importer";

const sampleJSON = `\
{
  "description": {
    "timeSeriesData": [
      { "label":"Time", "units":"s", "min":0, "max":0.1 },
      { "label":"Position", "units":"m", "min":0, "max":0.6 },
      { "label":"Velocity", "units":"m/s", "min":-10, "max":10 }
    ],
    "computationalInputs": [
      { "label":"Distance to steering wheel", "units":"m", "min":0.1, "max":0.5 },
      { "label":"Car speed", "units":"m/s", "min":0, "max":40 },
      { "label":"Airbag size", "units":"m", "min":0, "max":0.5 },
      { "label":"Time to fill bag", "units":"s", "min":0.01, "max":0.05 },
      { "label":"Deflate time", "units":"s", "min":0, "max":10 }
    ],
    "computationalOutputs": [
      { "label":"Maximum acceleration", "units":"g", "min":0, "max":200 },
      { "label":"Dummy Survival", "units":"categorical", "values":["Yes", "No", "Maybe"] }
    ],
    "studentInputs": [
      { "label":"Goal", "units":"categorical" }
    ],
    "modelInformation": [
      { "name":"airbags", "fileName":"airbags.v15i-include-modular.nlogo", "version":"v15i-include-modular" }
    ]
  },
  "runs": [
    {
      "timeStamp": "00:00:00.000 PM 1-Jan-2013",
      "timeSeriesData": [[0, 0.5, 0],[0.0010, 0.4998715266160052, -0.12847338399479533],[0.0020, 0.4992585335866378, -0.6129930293673783],[0.0030, 0.49765842807260247, -1.6001055140353244],[0.0040, 0.49453604107018306, -3.1223870024193756],[0.0050, 0.4894449181647293, -5.091122905453769],[0.0060, 0.48212866102954866, -7.316257135180635],[0.0070, 0.47257953523499674, -9.549125794551916],[0.0080, 0.4610411676805483, -11.538367554448405],[0.009000000000000001, 0.44795472720441715, -13.08644047613118],[0.010000000000000002, 0.43386068851324616, -14.094038691170958],[0.011000000000000003, 0.4192782657063964, -14.582422806849731],[0.012000000000000004, 0.40458962217911776, -14.688643527278646],[0.013000000000000005, 0.38995488982310617, -14.634732356011602],[0.014000000000000005, 0.3753759088284508, -14.578980994655367],[0.015000000000000006, 0.3608524668090132, -14.523442019437633],[0.016000000000000007, 0.3463843521877448, -14.468114621268347],[0.017000000000000008, 0.33197135419360513, -14.412997994139706],[0.01800000000000001, 0.31761326285849073, -14.358091335114413],[0.01900000000000001, 0.3033098690141768, -14.303393844313977],[0.02000000000000001, 0.2890609642892697, -14.248904724907065],[0.02100000000000001, 0.2748663411061718, -14.194623183097896],[0.022000000000000013, 0.2607257926780571, -14.140548428114666],[0.023000000000000013, 0.24663911300585908, -14.08667967219804],[0.024000000000000014, 0.23260609687526942, -14.033016130589667],[0.025000000000000015, 0.2187767294091238, -13.829367466145621],[0.026000000000000016, 0.20534705573297926, -13.429673676144528],[0.027000000000000017, 0.19250947795261697, -12.837577780362286],[0.028000000000000018, 0.18045137488655427, -12.05810306606271],[0.02900000000000002, 0.1693537634554581, -11.097611431096155],[0.03000000000000002, 0.1593900112693393, -9.963752186118798],[0.03100000000000002, 0.1507246095460814, -8.66540172325788],[0.03200000000000002, 0.14351201502290314, -7.212594523178277],[0.03300000000000002, 0.1378955689894334, -5.616446033469742],[0.03400000000000002, 0.13400650098128897, -3.8890680081444318],[0.035000000000000024, 0.13196302403087468, -2.0434769504142984],[0.036000000000000025, 0.1318695276824295, -0.0934963484452005],[0.037000000000000026, 0.1336991392598973, 1.8296115774678103],[0.03800000000000003, 0.1354841431646192, 1.7850039047219284],[0.03900000000000003, 0.13722562697414029, 1.741483809521089],[0.04000000000000003, 0.13892465174982924, 1.6990247756889558],[0.04100000000000003, 0.14058225268336808, 1.657600933538825],[0.04200000000000003, 0.14219943972747967, 1.6171870441115928],[0.04300000000000003, 0.14377719821127768, 1.577758483798015],[0.04400000000000003, 0.14531648944061357, 1.539291229335892],[0.04500000000000003, 0.14681825128378662, 1.501761843173036],[0.046000000000000034, 0.14828339874297372, 1.465147459187103],[0.047000000000000035, 0.14971282451172732, 1.429425768753589],[0.048000000000000036, 0.15110739951888083, 1.3945750071535015],[0.04900000000000004, 0.15246797345919325, 1.3605739403124257],[0.05000000000000004, 0.15379537531105614, 1.3274018518629038],[0.05100000000000004, 0.15509041384157837, 1.2950385305222463],[0.05200000000000004, 0.15635387809935647, 1.2634642577780848],[0.05300000000000004, 0.15758653789523064, 1.232659795874162],[0.05400000000000004, 0.15878914427131968, 1.2026063760890398],[0.05500000000000004, 0.15996242995862026, 1.1732856873005832],[0.05600000000000004, 0.1611071098234495, 1.1446798648292547],[0.057000000000000044, 0.16222388130300291, 1.1167714795534176],[0.058000000000000045, 0.16331342483029293, 1.08954352729002],[0.059000000000000045, 0.16437640424872713, 1.0629794184341872],[0.060000000000000046, 0.16541346721657854, 1.0370629678514107],[0.06100000000000005, 0.16642524560159472, 1.0117783850161763],[0.06200000000000005, 0.16741235586598574, 0.98711026439102],[0.06300000000000004, 0.1683753994420259, 0.9630435760401532],[0.06400000000000004, 0.16931496309849783, 0.9395636564719362],[0.06500000000000004, 0.17023161929820246, 0.9166561997046204],[0.06600000000000004, 0.17112592654675238, 0.8943072485499173],[0.06700000000000005, 0.17199842973286145, 0.8725031861090812],[0.06800000000000005, 0.17284966046033778, 0.8512307274763264],[0.06900000000000005, 0.17368013737198232, 0.8304769116445226],[0.07000000000000005, 0.17449036646559055, 0.8102290936082371],[0.07100000000000005, 0.17528084140224987, 0.7904749366593125],[0.07200000000000005, 0.17605204380712014, 0.7712024048702855],[0.07300000000000005, 0.17680444356288122, 0.7523997557610671],[0.07400000000000005, 0.17753849909602565, 0.7340555331444163],[0.07500000000000005, 0.1782546576561715, 0.7161585601458477],[0.07600000000000005, 0.1789533555885652, 0.6986979323937204],[0.07700000000000005, 0.17963501859994058, 0.6816630113753592],[0.07800000000000006, 0.18030006201789572, 0.66504341795516],[0.07900000000000006, 0.18094889104394646, 0.6488290260507295],[0.08000000000000006, 0.18158190100040966, 0.6330099564632069],[0.08100000000000006, 0.18219947757126767, 0.6175765708580088],[0.08200000000000006, 0.18280199703716, 0.6025194658923277],[0.08300000000000006, 0.1833898265046458, 0.58782946748581],[0.08400000000000006, 0.18396332412987673, 0.5734976252309179],[0.08500000000000006, 0.18452283933681632, 0.5595152069395736],[0.08600000000000006, 0.18506871303013908, 0.5458736933227611],[0.08700000000000006, 0.18560127780293892, 0.5325647727998443],[0.08800000000000006, 0.18612085813937335, 0.5195803364344386],[0.08900000000000007, 0.1866277706123671, 0.5069124729937513],[0.09000000000000007, 0.18712232407649548, 0.49455346412837986],[0.09100000000000007, 0.18760481985616512, 0.4824957796696308],[0.09200000000000007, 0.1880755519292066, 0.47073207304149506],[0.09300000000000007, 0.1885348071059911, 0.45925517678448335],[0.09400000000000007, 0.1889828652041797, 0.448058098188595],[0.09500000000000007, 0.18941999921921246, 0.4371340150327588],[0.09600000000000007, 0.1898464754906406, 0.4264762714281506],[0.09700000000000007, 0.19026255386440347, 0.4160783737628547],[0.09800000000000007, 0.19066848785114887, 0.40593398674539843],[0.09900000000000007, 0.1910645247806936, 0.39603692954474873]],
      "computationalInputs": [0.5, 15, 0.4, 0.03, 8],
      "computationalOutputs": [1942.1959278722816, "No"],
      "studentInputs": ["Just exploring"]
    },
    {
      "timeStamp": "01:00:00.000 PM 1-Jan-2013",
      "timeSeriesData": [[0, 0.5, 0],[0.0010, 0.4998715266160052, -0.12847338399479533],[0.0020, 0.4992585335866378, -0.6129930293673783],[0.0030, 0.49765842807260247, -1.6001055140353244],[0.0040, 0.49453604107018306, -3.1223870024193756],[0.0050, 0.4894449181647293, -5.091122905453769],[0.0060, 0.48212866102954866, -7.316257135180635],[0.0070, 0.47257953523499674, -9.549125794551916],[0.0080, 0.4610411676805483, -11.538367554448405],[0.009000000000000001, 0.44795472720441715, -13.08644047613118],[0.010000000000000002, 0.43386068851324616, -14.094038691170958],[0.011000000000000003, 0.4192782657063964, -14.582422806849731],[0.012000000000000004, 0.40458962217911776, -14.688643527278646],[0.013000000000000005, 0.38995488982310617, -14.634732356011602],[0.014000000000000005, 0.3753759088284508, -14.578980994655367],[0.015000000000000006, 0.3608524668090132, -14.523442019437633],[0.016000000000000007, 0.3463843521877448, -14.468114621268347],[0.017000000000000008, 0.33197135419360513, -14.412997994139706],[0.01800000000000001, 0.31761326285849073, -14.358091335114413],[0.01900000000000001, 0.3033098690141768, -14.303393844313977],[0.02000000000000001, 0.2890609642892697, -14.248904724907065],[0.02100000000000001, 0.2748663411061718, -14.194623183097896],[0.022000000000000013, 0.2607257926780571, -14.140548428114666],[0.023000000000000013, 0.24663911300585908, -14.08667967219804],[0.024000000000000014, 0.23260609687526942, -14.033016130589667],[0.025000000000000015, 0.2187767294091238, -13.829367466145621],[0.026000000000000016, 0.20534705573297926, -13.429673676144528],[0.027000000000000017, 0.19250947795261697, -12.837577780362286],[0.028000000000000018, 0.18045137488655427, -12.05810306606271],[0.02900000000000002, 0.1693537634554581, -11.097611431096155],[0.03000000000000002, 0.1593900112693393, -9.963752186118798],[0.03100000000000002, 0.1507246095460814, -8.66540172325788],[0.03200000000000002, 0.14351201502290314, -7.212594523178277],[0.03300000000000002, 0.1378955689894334, -5.616446033469742],[0.03400000000000002, 0.13400650098128897, -3.8890680081444318],[0.035000000000000024, 0.13196302403087468, -2.0434769504142984],[0.036000000000000025, 0.1318695276824295, -0.0934963484452005],[0.037000000000000026, 0.1336991392598973, 1.8296115774678103],[0.03800000000000003, 0.1354841431646192, 1.7850039047219284],[0.03900000000000003, 0.13722562697414029, 1.741483809521089],[0.04000000000000003, 0.13892465174982924, 1.6990247756889558],[0.04100000000000003, 0.14058225268336808, 1.657600933538825],[0.04200000000000003, 0.14219943972747967, 1.6171870441115928],[0.04300000000000003, 0.14377719821127768, 1.577758483798015],[0.04400000000000003, 0.14531648944061357, 1.539291229335892],[0.04500000000000003, 0.14681825128378662, 1.501761843173036],[0.046000000000000034, 0.14828339874297372, 1.465147459187103],[0.047000000000000035, 0.14971282451172732, 1.429425768753589],[0.048000000000000036, 0.15110739951888083, 1.3945750071535015],[0.04900000000000004, 0.15246797345919325, 1.3605739403124257],[0.05000000000000004, 0.15379537531105614, 1.3274018518629038],[0.05100000000000004, 0.15509041384157837, 1.2950385305222463],[0.05200000000000004, 0.15635387809935647, 1.2634642577780848],[0.05300000000000004, 0.15758653789523064, 1.232659795874162],[0.05400000000000004, 0.15878914427131968, 1.2026063760890398],[0.05500000000000004, 0.15996242995862026, 1.1732856873005832],[0.05600000000000004, 0.1611071098234495, 1.1446798648292547],[0.057000000000000044, 0.16222388130300291, 1.1167714795534176],[0.058000000000000045, 0.16331342483029293, 1.08954352729002],[0.059000000000000045, 0.16437640424872713, 1.0629794184341872],[0.060000000000000046, 0.16541346721657854, 1.0370629678514107],[0.06100000000000005, 0.16642524560159472, 1.0117783850161763],[0.06200000000000005, 0.16741235586598574, 0.98711026439102],[0.06300000000000004, 0.1683753994420259, 0.9630435760401532],[0.06400000000000004, 0.16931496309849783, 0.9395636564719362],[0.06500000000000004, 0.17023161929820246, 0.9166561997046204],[0.06600000000000004, 0.17112592654675238, 0.8943072485499173],[0.06700000000000005, 0.17199842973286145, 0.8725031861090812],[0.06800000000000005, 0.17284966046033778, 0.8512307274763264],[0.06900000000000005, 0.17368013737198232, 0.8304769116445226],[0.07000000000000005, 0.17449036646559055, 0.8102290936082371],[0.07100000000000005, 0.17528084140224987, 0.7904749366593125],[0.07200000000000005, 0.17605204380712014, 0.7712024048702855],[0.07300000000000005, 0.17680444356288122, 0.7523997557610671],[0.07400000000000005, 0.17753849909602565, 0.7340555331444163],[0.07500000000000005, 0.1782546576561715, 0.7161585601458477],[0.07600000000000005, 0.1789533555885652, 0.6986979323937204],[0.07700000000000005, 0.17963501859994058, 0.6816630113753592],[0.07800000000000006, 0.18030006201789572, 0.66504341795516],[0.07900000000000006, 0.18094889104394646, 0.6488290260507295],[0.08000000000000006, 0.18158190100040966, 0.6330099564632069],[0.08100000000000006, 0.18219947757126767, 0.6175765708580088],[0.08200000000000006, 0.18280199703716, 0.6025194658923277],[0.08300000000000006, 0.1833898265046458, 0.58782946748581],[0.08400000000000006, 0.18396332412987673, 0.5734976252309179],[0.08500000000000006, 0.18452283933681632, 0.5595152069395736],[0.08600000000000006, 0.18506871303013908, 0.5458736933227611],[0.08700000000000006, 0.18560127780293892, 0.5325647727998443],[0.08800000000000006, 0.18612085813937335, 0.5195803364344386],[0.08900000000000007, 0.1866277706123671, 0.5069124729937513],[0.09000000000000007, 0.18712232407649548, 0.49455346412837986],[0.09100000000000007, 0.18760481985616512, 0.4824957796696308],[0.09200000000000007, 0.1880755519292066, 0.47073207304149506],[0.09300000000000007, 0.1885348071059911, 0.45925517678448335],[0.09400000000000007, 0.1889828652041797, 0.448058098188595],[0.09500000000000007, 0.18941999921921246, 0.4371340150327588],[0.09600000000000007, 0.1898464754906406, 0.4264762714281506],[0.09700000000000007, 0.19026255386440347, 0.4160783737628547],[0.09800000000000007, 0.19066848785114887, 0.40593398674539843],[0.09900000000000007, 0.1910645247806936, 0.39603692954474873],[0, 0.4, 0],[0.0010, 0.3999492260637556, -0.05077393624441053],[0.0020, 0.39969998875991103, -0.24923730384459633],[0.0030, 0.39902104750891415, -0.6789412509968898],[0.0040, 0.3976183982411241, -1.4026492677900646],[0.0050, 0.3951616372928323, -2.456760948291794],[0.0060, 0.39131355899370546, -3.848078299126887],[0.0070, 0.38576035707148126, -5.553201922224203],[0.0080, 0.378239746347933, -7.5206107235482325],[0.009000000000000001, 0.36856450599136187, -9.67524035657112],[0.010000000000000002, 0.35663935240566813, -11.925153585693717],[0.011000000000000003, 0.34246964252711165, -14.169709878556498],[0.012000000000000004, 0.32616113420399656, -16.30850832311508],[0.013000000000000005, 0.3079108249519405, -18.250309252056038],[0.014000000000000005, 0.28798968310286555, -19.92114184907495],[0.015000000000000006, 0.2667188057622431, -21.270877340622462],[0.016000000000000007, 0.24444112204605423, -22.277683716188875],[0.017000000000000008, 0.22149115589037024, -22.94996615568397],[0.01800000000000001, 0.19816553514194313, -23.32562074842712],[0.01900000000000001, 0.1746968673278496, -23.468667814093536],[0.02000000000000001, 0.15123330335802138, -23.4635639698282],[0.02100000000000001, 0.12782560501669277, -23.407698341328608],[0.022000000000000013, 0.10447363929046256, -23.351965726230205],[0.023000000000000013, 0.08130012892090088, -23.17351036956168],[0.024000000000000014, 0.05852432141329636, -22.775807507604522],[0.025000000000000015, 0.03636206050013015, -22.162260913166207],[0.026000000000000016, 0.015024230241611345, -21.337830258518803],[0.027000000000000017, -0.005284761231479796, -20.30899147309114]],
      "computationalInputs": [0.4, 24, 0.25, 0.035, 8],
      "computationalOutputs": [978.034427669285, "No"],
      "studentInputs": ["What is the safe range of driver distances?"]
    }
  ]
}\
`;

const sampleData = JSON.parse(sampleJSON);

describe("NetLogo importer", function () {

  describe("importRun method", function () {

    it("should return the same results for stringified JSON as for a JavaScript hash", function () {
      let results = null;
      ((() => results = importer.importRun(sampleJSON, 0))).should.not.throw();
      results.should.eql(importer.importRun(sampleData, 0));
    });

    describe("the object returned by importRun", function () {
      const ret = importer.importRun(sampleData, 0);

      it("should have perRunLabels property", () => {
        should.exist(ret.perRunLabels);
      });

      describe("the perRunLabels property", () => {
        it("should be a list of the inputs, outputs, and \"student inputs\", with units", () => {
          ret.perRunLabels.should.eql([
            "Distance to steering wheel (m)",
            "Car speed (m/s)",
            "Airbag size (m)",
            "Time to fill bag (s)",
            "Deflate time (s)",
            "Maximum acceleration (g)",
            "Dummy Survival (categorical)",
            "Goal (categorical)"
          ]);
        });
      });

      it("should have a perRunValues property", function () {
        should.exist(ret.perRunValues);
      });

      describe("the perRunValues property", () => {
        it("should be a list of values of the inputs, outputs, and \"student inputs\"", () => {
          ret.perRunValues.should.eql([
            0.5,
            15,
            0.4,
            0.03,
            8,
            1942.1959278722816,
            "No",
            "Just exploring"
          ]);
        });
      });


      it("should have a perTickLabels property", () => {
        should.exist(ret.perTickLabels);
      });

      describe("the perTickLabels property", () => {
        it("should be a list of the time series data labels, with units", () => {
          ret.perTickLabels.should.eql([
            "Time (s)",
            "Position (m)",
            "Velocity (m/s)"
          ]);
        });
      });

      it("should have a perTickValues property", () => {
        should.exist(ret.perTickValues);
      });

      describe("the perTickValues property", () => {
        it("should be a list of lists of time series values for all columns", () => {
          ret.perTickValues.should.eql([[0, 0.5, 0], [0.0010, 0.4998715266160052, -0.12847338399479533], [0.0020, 0.4992585335866378, -0.6129930293673783], [0.0030, 0.49765842807260247, -1.6001055140353244], [0.0040, 0.49453604107018306, -3.1223870024193756], [0.0050, 0.4894449181647293, -5.091122905453769], [0.0060, 0.48212866102954866, -7.316257135180635], [0.0070, 0.47257953523499674, -9.549125794551916], [0.0080, 0.4610411676805483, -11.538367554448405], [0.009000000000000001, 0.44795472720441715, -13.08644047613118], [0.010000000000000002, 0.43386068851324616, -14.094038691170958], [0.011000000000000003, 0.4192782657063964, -14.582422806849731], [0.012000000000000004, 0.40458962217911776, -14.688643527278646], [0.013000000000000005, 0.38995488982310617, -14.634732356011602], [0.014000000000000005, 0.3753759088284508, -14.578980994655367], [0.015000000000000006, 0.3608524668090132, -14.523442019437633], [0.016000000000000007, 0.3463843521877448, -14.468114621268347], [0.017000000000000008, 0.33197135419360513, -14.412997994139706], [0.01800000000000001, 0.31761326285849073, -14.358091335114413], [0.01900000000000001, 0.3033098690141768, -14.303393844313977], [0.02000000000000001, 0.2890609642892697, -14.248904724907065], [0.02100000000000001, 0.2748663411061718, -14.194623183097896], [0.022000000000000013, 0.2607257926780571, -14.140548428114666], [0.023000000000000013, 0.24663911300585908, -14.08667967219804], [0.024000000000000014, 0.23260609687526942, -14.033016130589667], [0.025000000000000015, 0.2187767294091238, -13.829367466145621], [0.026000000000000016, 0.20534705573297926, -13.429673676144528], [0.027000000000000017, 0.19250947795261697, -12.837577780362286], [0.028000000000000018, 0.18045137488655427, -12.05810306606271], [0.02900000000000002, 0.1693537634554581, -11.097611431096155], [0.03000000000000002, 0.1593900112693393, -9.963752186118798], [0.03100000000000002, 0.1507246095460814, -8.66540172325788], [0.03200000000000002, 0.14351201502290314, -7.212594523178277], [0.03300000000000002, 0.1378955689894334, -5.616446033469742], [0.03400000000000002, 0.13400650098128897, -3.8890680081444318], [0.035000000000000024, 0.13196302403087468, -2.0434769504142984], [0.036000000000000025, 0.1318695276824295, -0.0934963484452005], [0.037000000000000026, 0.1336991392598973, 1.8296115774678103], [0.03800000000000003, 0.1354841431646192, 1.7850039047219284], [0.03900000000000003, 0.13722562697414029, 1.741483809521089], [0.04000000000000003, 0.13892465174982924, 1.6990247756889558], [0.04100000000000003, 0.14058225268336808, 1.657600933538825], [0.04200000000000003, 0.14219943972747967, 1.6171870441115928], [0.04300000000000003, 0.14377719821127768, 1.577758483798015], [0.04400000000000003, 0.14531648944061357, 1.539291229335892], [0.04500000000000003, 0.14681825128378662, 1.501761843173036], [0.046000000000000034, 0.14828339874297372, 1.465147459187103], [0.047000000000000035, 0.14971282451172732, 1.429425768753589], [0.048000000000000036, 0.15110739951888083, 1.3945750071535015], [0.04900000000000004, 0.15246797345919325, 1.3605739403124257], [0.05000000000000004, 0.15379537531105614, 1.3274018518629038], [0.05100000000000004, 0.15509041384157837, 1.2950385305222463], [0.05200000000000004, 0.15635387809935647, 1.2634642577780848], [0.05300000000000004, 0.15758653789523064, 1.232659795874162], [0.05400000000000004, 0.15878914427131968, 1.2026063760890398], [0.05500000000000004, 0.15996242995862026, 1.1732856873005832], [0.05600000000000004, 0.1611071098234495, 1.1446798648292547], [0.057000000000000044, 0.16222388130300291, 1.1167714795534176], [0.058000000000000045, 0.16331342483029293, 1.08954352729002], [0.059000000000000045, 0.16437640424872713, 1.0629794184341872], [0.060000000000000046, 0.16541346721657854, 1.0370629678514107], [0.06100000000000005, 0.16642524560159472, 1.0117783850161763], [0.06200000000000005, 0.16741235586598574, 0.98711026439102], [0.06300000000000004, 0.1683753994420259, 0.9630435760401532], [0.06400000000000004, 0.16931496309849783, 0.9395636564719362], [0.06500000000000004, 0.17023161929820246, 0.9166561997046204], [0.06600000000000004, 0.17112592654675238, 0.8943072485499173], [0.06700000000000005, 0.17199842973286145, 0.8725031861090812], [0.06800000000000005, 0.17284966046033778, 0.8512307274763264], [0.06900000000000005, 0.17368013737198232, 0.8304769116445226], [0.07000000000000005, 0.17449036646559055, 0.8102290936082371], [0.07100000000000005, 0.17528084140224987, 0.7904749366593125], [0.07200000000000005, 0.17605204380712014, 0.7712024048702855], [0.07300000000000005, 0.17680444356288122, 0.7523997557610671], [0.07400000000000005, 0.17753849909602565, 0.7340555331444163], [0.07500000000000005, 0.1782546576561715, 0.7161585601458477], [0.07600000000000005, 0.1789533555885652, 0.6986979323937204], [0.07700000000000005, 0.17963501859994058, 0.6816630113753592], [0.07800000000000006, 0.18030006201789572, 0.66504341795516], [0.07900000000000006, 0.18094889104394646, 0.6488290260507295], [0.08000000000000006, 0.18158190100040966, 0.6330099564632069], [0.08100000000000006, 0.18219947757126767, 0.6175765708580088], [0.08200000000000006, 0.18280199703716, 0.6025194658923277], [0.08300000000000006, 0.1833898265046458, 0.58782946748581], [0.08400000000000006, 0.18396332412987673, 0.5734976252309179], [0.08500000000000006, 0.18452283933681632, 0.5595152069395736], [0.08600000000000006, 0.18506871303013908, 0.5458736933227611], [0.08700000000000006, 0.18560127780293892, 0.5325647727998443], [0.08800000000000006, 0.18612085813937335, 0.5195803364344386], [0.08900000000000007, 0.1866277706123671, 0.5069124729937513], [0.09000000000000007, 0.18712232407649548, 0.49455346412837986], [0.09100000000000007, 0.18760481985616512, 0.4824957796696308], [0.09200000000000007, 0.1880755519292066, 0.47073207304149506], [0.09300000000000007, 0.1885348071059911, 0.45925517678448335], [0.09400000000000007, 0.1889828652041797, 0.448058098188595], [0.09500000000000007, 0.18941999921921246, 0.4371340150327588], [0.09600000000000007, 0.1898464754906406, 0.4264762714281506], [0.09700000000000007, 0.19026255386440347, 0.4160783737628547], [0.09800000000000007, 0.19066848785114887, 0.40593398674539843], [0.09900000000000007, 0.1910645247806936, 0.39603692954474873]]);
        });
      });
    });

    describe("when a different run is selected", function () {
      const ret = importer.importRun(sampleData, 1);

      it("should return perRunValues associated with that run", () => {
        ret.perRunValues.should.eql([
          0.4,
          24,
          0.25,
          0.035,
          8,
          978.034427669285,
          "No",
          "What is the safe range of driver distances?"
        ]);
      });

      it("should return perTickValues associated with that run", () => {
        ret.perTickValues.should.eql([[0, 0.5, 0], [0.0010, 0.4998715266160052, -0.12847338399479533], [0.0020, 0.4992585335866378, -0.6129930293673783], [0.0030, 0.49765842807260247, -1.6001055140353244], [0.0040, 0.49453604107018306, -3.1223870024193756], [0.0050, 0.4894449181647293, -5.091122905453769], [0.0060, 0.48212866102954866, -7.316257135180635], [0.0070, 0.47257953523499674, -9.549125794551916], [0.0080, 0.4610411676805483, -11.538367554448405], [0.009000000000000001, 0.44795472720441715, -13.08644047613118], [0.010000000000000002, 0.43386068851324616, -14.094038691170958], [0.011000000000000003, 0.4192782657063964, -14.582422806849731], [0.012000000000000004, 0.40458962217911776, -14.688643527278646], [0.013000000000000005, 0.38995488982310617, -14.634732356011602], [0.014000000000000005, 0.3753759088284508, -14.578980994655367], [0.015000000000000006, 0.3608524668090132, -14.523442019437633], [0.016000000000000007, 0.3463843521877448, -14.468114621268347], [0.017000000000000008, 0.33197135419360513, -14.412997994139706], [0.01800000000000001, 0.31761326285849073, -14.358091335114413], [0.01900000000000001, 0.3033098690141768, -14.303393844313977], [0.02000000000000001, 0.2890609642892697, -14.248904724907065], [0.02100000000000001, 0.2748663411061718, -14.194623183097896], [0.022000000000000013, 0.2607257926780571, -14.140548428114666], [0.023000000000000013, 0.24663911300585908, -14.08667967219804], [0.024000000000000014, 0.23260609687526942, -14.033016130589667], [0.025000000000000015, 0.2187767294091238, -13.829367466145621], [0.026000000000000016, 0.20534705573297926, -13.429673676144528], [0.027000000000000017, 0.19250947795261697, -12.837577780362286], [0.028000000000000018, 0.18045137488655427, -12.05810306606271], [0.02900000000000002, 0.1693537634554581, -11.097611431096155], [0.03000000000000002, 0.1593900112693393, -9.963752186118798], [0.03100000000000002, 0.1507246095460814, -8.66540172325788], [0.03200000000000002, 0.14351201502290314, -7.212594523178277], [0.03300000000000002, 0.1378955689894334, -5.616446033469742], [0.03400000000000002, 0.13400650098128897, -3.8890680081444318], [0.035000000000000024, 0.13196302403087468, -2.0434769504142984], [0.036000000000000025, 0.1318695276824295, -0.0934963484452005], [0.037000000000000026, 0.1336991392598973, 1.8296115774678103], [0.03800000000000003, 0.1354841431646192, 1.7850039047219284], [0.03900000000000003, 0.13722562697414029, 1.741483809521089], [0.04000000000000003, 0.13892465174982924, 1.6990247756889558], [0.04100000000000003, 0.14058225268336808, 1.657600933538825], [0.04200000000000003, 0.14219943972747967, 1.6171870441115928], [0.04300000000000003, 0.14377719821127768, 1.577758483798015], [0.04400000000000003, 0.14531648944061357, 1.539291229335892], [0.04500000000000003, 0.14681825128378662, 1.501761843173036], [0.046000000000000034, 0.14828339874297372, 1.465147459187103], [0.047000000000000035, 0.14971282451172732, 1.429425768753589], [0.048000000000000036, 0.15110739951888083, 1.3945750071535015], [0.04900000000000004, 0.15246797345919325, 1.3605739403124257], [0.05000000000000004, 0.15379537531105614, 1.3274018518629038], [0.05100000000000004, 0.15509041384157837, 1.2950385305222463], [0.05200000000000004, 0.15635387809935647, 1.2634642577780848], [0.05300000000000004, 0.15758653789523064, 1.232659795874162], [0.05400000000000004, 0.15878914427131968, 1.2026063760890398], [0.05500000000000004, 0.15996242995862026, 1.1732856873005832], [0.05600000000000004, 0.1611071098234495, 1.1446798648292547], [0.057000000000000044, 0.16222388130300291, 1.1167714795534176], [0.058000000000000045, 0.16331342483029293, 1.08954352729002], [0.059000000000000045, 0.16437640424872713, 1.0629794184341872], [0.060000000000000046, 0.16541346721657854, 1.0370629678514107], [0.06100000000000005, 0.16642524560159472, 1.0117783850161763], [0.06200000000000005, 0.16741235586598574, 0.98711026439102], [0.06300000000000004, 0.1683753994420259, 0.9630435760401532], [0.06400000000000004, 0.16931496309849783, 0.9395636564719362], [0.06500000000000004, 0.17023161929820246, 0.9166561997046204], [0.06600000000000004, 0.17112592654675238, 0.8943072485499173], [0.06700000000000005, 0.17199842973286145, 0.8725031861090812], [0.06800000000000005, 0.17284966046033778, 0.8512307274763264], [0.06900000000000005, 0.17368013737198232, 0.8304769116445226], [0.07000000000000005, 0.17449036646559055, 0.8102290936082371], [0.07100000000000005, 0.17528084140224987, 0.7904749366593125], [0.07200000000000005, 0.17605204380712014, 0.7712024048702855], [0.07300000000000005, 0.17680444356288122, 0.7523997557610671], [0.07400000000000005, 0.17753849909602565, 0.7340555331444163], [0.07500000000000005, 0.1782546576561715, 0.7161585601458477], [0.07600000000000005, 0.1789533555885652, 0.6986979323937204], [0.07700000000000005, 0.17963501859994058, 0.6816630113753592], [0.07800000000000006, 0.18030006201789572, 0.66504341795516], [0.07900000000000006, 0.18094889104394646, 0.6488290260507295], [0.08000000000000006, 0.18158190100040966, 0.6330099564632069], [0.08100000000000006, 0.18219947757126767, 0.6175765708580088], [0.08200000000000006, 0.18280199703716, 0.6025194658923277], [0.08300000000000006, 0.1833898265046458, 0.58782946748581], [0.08400000000000006, 0.18396332412987673, 0.5734976252309179], [0.08500000000000006, 0.18452283933681632, 0.5595152069395736], [0.08600000000000006, 0.18506871303013908, 0.5458736933227611], [0.08700000000000006, 0.18560127780293892, 0.5325647727998443], [0.08800000000000006, 0.18612085813937335, 0.5195803364344386], [0.08900000000000007, 0.1866277706123671, 0.5069124729937513], [0.09000000000000007, 0.18712232407649548, 0.49455346412837986], [0.09100000000000007, 0.18760481985616512, 0.4824957796696308], [0.09200000000000007, 0.1880755519292066, 0.47073207304149506], [0.09300000000000007, 0.1885348071059911, 0.45925517678448335], [0.09400000000000007, 0.1889828652041797, 0.448058098188595], [0.09500000000000007, 0.18941999921921246, 0.4371340150327588], [0.09600000000000007, 0.1898464754906406, 0.4264762714281506], [0.09700000000000007, 0.19026255386440347, 0.4160783737628547], [0.09800000000000007, 0.19066848785114887, 0.40593398674539843], [0.09900000000000007, 0.1910645247806936, 0.39603692954474873], [0, 0.4, 0], [0.0010, 0.3999492260637556, -0.05077393624441053], [0.0020, 0.39969998875991103, -0.24923730384459633], [0.0030, 0.39902104750891415, -0.6789412509968898], [0.0040, 0.3976183982411241, -1.4026492677900646], [0.0050, 0.3951616372928323, -2.456760948291794], [0.0060, 0.39131355899370546, -3.848078299126887], [0.0070, 0.38576035707148126, -5.553201922224203], [0.0080, 0.378239746347933, -7.5206107235482325], [0.009000000000000001, 0.36856450599136187, -9.67524035657112], [0.010000000000000002, 0.35663935240566813, -11.925153585693717], [0.011000000000000003, 0.34246964252711165, -14.169709878556498], [0.012000000000000004, 0.32616113420399656, -16.30850832311508], [0.013000000000000005, 0.3079108249519405, -18.250309252056038], [0.014000000000000005, 0.28798968310286555, -19.92114184907495], [0.015000000000000006, 0.2667188057622431, -21.270877340622462], [0.016000000000000007, 0.24444112204605423, -22.277683716188875], [0.017000000000000008, 0.22149115589037024, -22.94996615568397], [0.01800000000000001, 0.19816553514194313, -23.32562074842712], [0.01900000000000001, 0.1746968673278496, -23.468667814093536], [0.02000000000000001, 0.15123330335802138, -23.4635639698282], [0.02100000000000001, 0.12782560501669277, -23.407698341328608], [0.022000000000000013, 0.10447363929046256, -23.351965726230205], [0.023000000000000013, 0.08130012892090088, -23.17351036956168], [0.024000000000000014, 0.05852432141329636, -22.775807507604522], [0.025000000000000015, 0.03636206050013015, -22.162260913166207], [0.026000000000000016, 0.015024230241611345, -21.337830258518803], [0.027000000000000017, -0.005284761231479796, -20.30899147309114]]);
      });
    });
  });


  describe("numberOfRuns method", function () {
    it("should return the same results for stringified JSON as for a JavaScript hash", function () {
      let results = null;
      ((() => results = importer.numberOfRuns(sampleJSON))).should.not.throw();
      results.should.eql(importer.numberOfRuns(sampleData));
    });

    it("should return the number of runs present in the input data", () => {
      (importer.numberOfRuns(sampleData)).should.eql(2);
    });
  });


  describe("timeStamps method", () => {
    it("should return an ordered list of the timeStamps in the run data", () => {
      importer.timeStamps(sampleJSON).should.eql([
        "00:00:00.000 PM 1-Jan-2013",
        "01:00:00.000 PM 1-Jan-2013"
      ]);
    });
  });

  describe("runHavingTimeStamp method", function () {
    it("should return the number of the run having the time stamp passed in", function () {
      importer.runHavingTimeStamp(sampleJSON, "01:00:00.000 PM 1-Jan-2013").should.eql(1);
      importer.runHavingTimeStamp(sampleJSON, "00:00:00.000 PM 1-Jan-2013").should.eql(0);
    });

    describe("when the timeStamp is not in the list of runs", () => {
      it("should return null", () => {
        should.strictEqual(importer.runHavingTimeStamp(sampleJSON, "XX:00:00.000 PM 1-Jan-2013"), null);
      });
    });
  });
});
